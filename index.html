<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The Last Circle</title>

<style>
  body {
    margin: 0;
    background: #111;
    color: #fff;
    font-family: Arial, sans-serif;

    /* CENTER EVERYTHING */
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  .container {
    display: flex;
    flex-direction: column;
    align-items: center;   /* centers title, board, buttons together */
  }

  h1 {
    margin-bottom: 24px;
    font-size: 28px;
    text-align: center;
  }

  .board {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 28px;
    align-items: flex-start; /* rows stay left-aligned internally */
  }

  .row {
    display: flex;
    gap: 14px;
  }

  .circle {
    width: 56px;          /* BIGGER CIRCLES */
    height: 56px;
    border-radius: 50%;
    border: 3px solid #fff;
    background: transparent;
    cursor: pointer;
  }

  .circle.filled {
    background: #fff;
  }

  .controls {
    display: flex;
    gap: 14px;
    justify-content: center;
  }

  button {
    padding: 12px 18px;
    font-size: 16px;
    cursor: pointer;
  }
</style>
</head>

<body>

<div class="container">

  <h1>The Last Circle</h1>

  <div id="board" class="board"></div>

  <div class="controls">
    <button id="undo">Undo</button>
    <button id="clear">Clear</button>
    <button id="restart">Restart</button>
  </div>

</div>

<script>
  const ROWS = [3, 4, 5, 6];

  let state = [];
  let history = [];

  const board = document.getElementById("board");
  const undoBtn = document.getElementById("undo");
  const clearBtn = document.getElementById("clear");
  const restartBtn = document.getElementById("restart");

  function copyState() {
    return state.map(row => [...row]);
  }

  function init() {
    state = ROWS.map(n => Array(n).fill(false));
    history = [];
    render();
  }

  function render() {
    board.innerHTML = "";

    state.forEach((row, r) => {
      const rowDiv = document.createElement("div");
      rowDiv.className = "row";

      row.forEach((filled, c) => {
        const circle = document.createElement("div");
        circle.className = "circle" + (filled ? " filled" : "");
        circle.onclick = () => {
          history.push(copyState());
          state[r][c] = !state[r][c];
          render();
        };
        rowDiv.appendChild(circle);
      });

      board.appendChild(rowDiv);
    });
  }

  undoBtn.onclick = () => {
    if (history.length) {
      state = history.pop();
      render();
    }
  };

  clearBtn.onclick = () => {
    history.push(copyState());
    state = state.map(row => row.map(() => false));
    render();
  };

  restartBtn.onclick = init;

  init();
</script>

</body>
</html>
